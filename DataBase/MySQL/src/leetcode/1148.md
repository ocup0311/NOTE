## [1148. Article Views I](https://leetcode.com/problems/article-views-i/description/)

- 我的解答：

  ```sql
  SELECT DISTINCT author_id AS id
  FROM Views
  WHERE author_id = viewer_id
  ORDER BY id;
  ```

- 說明：

  8.0 之後的版本，這兩個效率近乎相當，8.0 之前的版本 distinct 的效率要比 group by 的去重效率高，因為 group by 會有隱式排序，8.0 之後移除了

  ```
  GROUP BY 和 DISTINCT 在 MySQL 中都可以用來移除查詢結果中的重複行，但它們的工作原理和適用場景有所不同。

  DISTINCT DISTINCT 關鍵字用於移除查詢結果中的重複行。當您對單一欄位使用 DISTINCT 時，MySQL 會尋找該列的所有唯一值。 GROUP BY GROUP BY 語句用於將相同值的行分組在一起，並且可以對每個分組進行聚合計算，如計數、求和、平均等。

  效率比較在某些情況下，GROUP BY 可能會比 DISTINCT 更有效率，原因如下：

  索引使用：如果查詢的欄位上有索引，GROUP BY 可以利用索引來最佳化查詢。而 DISTINCT 可能需要全表掃描才能找到所有唯一的值。 聚合函數：當您需要將分組的資料進行聚合計算（如計數、求和等）時，GROUP BY 可以直接在分組的基礎上進行計算，而 DISTINCT 需要先找到所有唯一的值，然後再進行聚合計算。 查詢最佳化器：在某些情況下，MySQL 的查詢最佳化器可能會為 GROUP BY 提供更優的執行計劃，因為它可以更有效地對資料進行分組和聚合。 然而，這並不意味著 GROUP BY 總是比 DISTINCT 有效率。在某些簡單的查詢中，如果只需要移除重複行而不需要進行聚合計算，DISTINCT 可能會更有效率。此外，效率還取決於特定的資料庫表結構、索引設計、資料分佈和查詢複雜性等因素。

  在實際應用中，您應該根據特定的查詢需求和資料特性來選擇使用 GROUP BY 還是 DISTINCT，並在必要時對查詢進行效能測試。
  ```

  ```
  我說一下自己的理解，僅供參考。 group by 和 distinct 都可以實現去重的效果，但是效率是無法給出一個準確的比較的，在不同的情況下結果可能不同，得看實際場景。在資料集特別大的時候，group by 會快些，distinct 在去重過程中會先排序，然後比較相鄰行。 group by 是進行分組，每個群組進行聚合計算。
  ```

- 其他解答：

```sql
SELECT author_id AS id FROM Views WHERE author_id = viewer_id
UNION
SELECT author_id AS id FROM Views WHERE author_id = viewer_id
ORDER BY id;
```

```sql
SELECT author_id AS id
FROM Views
WHERE author_id = viewer_id
GROUP BY id
ORDER BY id;
```

```sql
SELECT DISTINCT(author_id) AS id
FROM Views
WHERE author_id = viewer_id
GROUP BY author_id, viewer_id
HAVING count(*) >= 1
ORDER BY id;
```

```sql
SELECT DISTINCT v1.author_id AS id
FROM Views v1 JOIN Views v2
ON v1.author_id = v2.viewer_id AND v1.article_id = v2.article_id
ORDER BY id;
```

- ORDER BY id 跟 author_id，是否有差？
- GROUP BY vs DISTINCT vs JOIN
- GROUP BY、HAVING、ORDER BY 等順序
